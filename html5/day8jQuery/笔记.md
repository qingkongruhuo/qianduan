# jQuery 第一天

## 一、jQuery
jQuery是一个快速的，小乔的，特点众多的js哭，它的api都是跨浏览器的，最新版本不兼容ie678，我们学习的是jQuery,api完全一样.

jQuery的哲学是简化dom开发，为兼容而生，jQuery简化了我们对dom的开发，所以我们就有更多的经历，着眼于业务的书写。

引入jQuery要写在最前面。
### 1.1 常用方法

**下拉与上滑**：

​		slideDown()和slideUp()

​				slideDown(): 徐徐展开。

​		slideUp():慢慢合起。

​				参数：不写时间参数也表示动画，默认为400ms。还可以书写参数。

 				动画机理：slideDown()是开始时，元素瞬间height为0.然后慢慢高度增加到css设置的数值。 slideUp()相反。

 		slideToggle()切换。

**淡入淡出**：

​		fadeIn()和fadeOut()

​		fadeIn()：淡入

​		fadeOut():淡出

 			参数。可以书写时间参数也可以省略

html()：

​		可以读取元素的内部文本。

​		还可以设置内部文本。参数：要设置的文字。还可以添加DOM节点。

​		原理就是为元素设置innerHTML属性

操作元素类：

​		addClass()  添加类

​		removeClass() 删除类

​		hasClass	判断类

​		toggleClass()  切换类

attr()：

​		该方法用于设置元素的原有属性

​		使用方式：$(dom).attr(key, value)

​				key： 原有的属性名

​				value： 属性值

​				当传递一个参数的时候，可以读取元素的原有属性值

```js
$('.btn1').click(function() {
    // 获取内容
    console.log($('.box').html());
})
$('.btn2').click(function() {
    // 修改内容
    // $('.box').html('爱创课堂')
    // 可以渲染标签
    $('.box').html('<h1>爱创课堂</h1>')
})
$('.btn3').click(function() {
    // 添加类
    $('.box').addClass('red')
})
$('.btn4').click(function() {
    // 删除类
    $('.box').removeClass('red')
})
$('.btn5').click(function() {
    // 切换类
    $('.box').toggleClass('red')
})
$('.btn6').click(function() {
    // 判断类的存在
    console.log($('.box').hasClass('red'));
})
$('.btn7').click(function() {
    // 添加属性
    // $('.box').attr('title', 'hello ickt')
    // $('.box').attr('ickt', 'hello ickt')
    $('.box').attr({
        title: 'hello',
        ickt: 100,
        num: 200
    })
})
$('.btn8').click(function() {
    // 获取属性
    console.log($('.box').attr('title'));
})
```



### 1.2 节点操作

$(this)：在事件回调函数中，获取当前元素对应的jq对象。

parent()：是一个方法，有小括号。父节点（只能选中元素的父亲节点，不能选中爷爷或者曾爷爷）

children()：子节点（不包含后代）。小括号中可以书写参数，表示指定的某个儿子。

siblings()：亲兄弟。只能选中同一个父节点的亲兄弟。

其它节点方法：

next: 选中下一个兄弟节点

nextAll: 会选中后面所有的兄弟节点

prev: 选中上一个兄弟节点

prevAll: 会选中前面所有的兄弟节点

parents: 会选中祖先节点

find： 会选中后代节点

连续打点：节点操作可以连续打点。 

注：end方法可以中断查找，返回上一个jq对象。

### 1.3 序号问题

eq()：表示选中元素大队列的排名，与亲兄弟没有直接的关系。

​		选中元素的不同，序号也是不相同的

index()：表示选中元素亲兄弟的排名，只要是同一个父节点都是亲兄弟。

​		它的值非常的稳定，无视选择器的选择，

​		返回值就是索引值

each()：用于遍历、循环所匹配到的每一个元素，

​		接收一个参数是函数，函数中也有this，表示遍历到的该对象

​				方法会遍历每一个所匹配到的元素。

​		方法中的函数里面有一个参数i,表示遍历到该对象的序号

```js
// 点击p获取它的内容
// $('p').click(function() {
//     // console.log(this, $(this), $(this).html())
//     // 获取父节点
//     console.log($(this).parent()[0]);
//     console.log($(this).parents());
//     console.log($(this).parents('body'));
// })
// 点击div，获取子节点
// $('.box').click(function() {
//     console.log($(this).children('h1'));
// })
// 兄弟节点
// console.log($('.title').siblings());
// h1后满的元素
// console.log($('.title').next())
// console.log($('.title').nextAll())
// h1前面的元素
// console.log($('.title').prev());
// console.log($('.title').prevAll());

// 查早后代子元素
// 继续查找将在strong内查找
// console.log($('.box').find('strong'));
// console.log($('.box').find('strong').find('h1'));
// // end方法，返回最初的jq对象
// console.log($('.box').find('strong').find('h1').end().end().find('h1'));
// 获取p
// console.log($('p'));
// $('p').eq(3).css('background', 'pink')
// $('p').index(2).css('background', 'pink')
// console.log($('p').index());
// 点击p，获取p在列表中的索引值
// $('p').click(function() {
//     console.log($(this).index());
// })
// 对每一个p元素处理
$('p').each(function(index, item) {
    console.log(item, this)
})
```



### 1.4 动画

animate函数接收两个参数

​		第一个参数： CSS样式对象

​				能够参与动画的属性：所有数值型的属性都可以参与动画

​				如：width，height，border ……

 		第二个参数: time （完成动画的时间）单位ms

​				animate函数基于终点的动画

执行顺序：

​		同一元素的不同animate，会按照顺序执行

​		不同元素的animate，会同时执行

css和animate：animate需要花费时间（动态），css会瞬间完成（静态）

```js
// 点击按钮，更改元素位置
$('.btn').click(function() {
    // 更改盒子1的位置
    // $('.box1').css({
    //     left: 1200,
    //     top: 400
    // })
    // 动画效果
    // $('.box1').animate({
    //     left: 1200,
    //     top: 400
    // }, 2000)
    // 同一个元素添加两个动画, 按照添加的顺序执行
    $('.box1').animate({ left: 1200 }, 2000);
    $('.box1').animate({ top: 400 }, 2000);
    // 不同的元素添加同一个动画，会一起执行
    $('.box2').animate({ left: 1200 }, 2000);
    $('.box2').animate({ top: 400 }, 2000);

})
```



### 1.5 动画的回调函数

异步语句: 类似于animate这种需要花费时间的语句，如果后面还有其它的js语句，这些语句不会等着animate执行

完毕之后再去执行，而是会立即执行。

回调函数: 异步语句一般都有一个回调函数，当异步语句执行之后要做的事件就是写在回调函数中的

​		比如：animate()、show(100)、hide(100)、slideDown()、slideUp()、fadeIn()、fadeOut()

​		例如:我们要做一次肉菜，第一步是先将肉从冰箱中取出，将肉放入微波炉中解冻，解冻需要花费5min，在这

期间我们还能烧水、洗菜、摘菜，等到微波炉叮一声之后（叮一声之后要做的事情就是写在回调函数中），将肉取

出，开始做肉菜，做肉菜的行为就是写在回调函数中

实际上animate函数可以接收三个参数：

​		animate(json, time, callBack)

​		json： 样式对象

​		time:：完成动画的时间

​		callBack：回调函数

```js
// 点击按钮，更改元素位置
$('.btn').click(function() {
    // 让盒子移动过, 结束后，将背景色变成绿色
    // $('.box1').animate({ left: 1200 }, 2000, function() {
    //     // 回调函数表示，动画结束完毕
    //     $('.box1').css({ backgroundColor: 'green' })
    // });
    // 设置背景
    // $('.box1').css({ backgroundColor: 'green' })

    // 下拉显示
    $('.box1').slideDown(2000, function() {
        // 监听动画结束
        $('.box1').css({ backgroundColor: 'green' })
    })
    // $('.box1').css({ backgroundColor: 'green' })

})
```



### 1.6 延迟与终止

delay：表示延迟，只能够书写在动画之前，参数就是要延迟的时间

​		动画方法如：animate()、show(100)、hide(100)、slideDown()、slideUp()、fadeIn()、fadeOut()

​		我们可以利用delay控制元素的入场顺序

stop：该方法用于让运动的元素立即停止动画，接收两个参数，都是布尔值，默认是false

​		第一个参数表示是否清空当前动画队列

​		第二个参数表示是否立即完成当前动画

 stop(false, false)： 等价于stop() 立即进入下一个动画，立即停止当前执行动画

 stop(false,true)：立即进入下一个动画，立即停止并完成当前动画

 stop(true, true)： 清空当前动画队列， 立即停止并完成当前动画

 stop(ture, false)：等价于stop(true)  清空当前动画队列，立即停止当前动画

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        div {
            width: 100px;
            height: 100px;
            margin-top: 10px;
            position: relative;
            background-color: pink;
        }
        .box2 {
            background-color: green;
            margin-left: 120px;
        }
    </style>
</head>
<body>
    <button class="btn">执行动画</button>
    <div class="box2"></div>
    <div class="box1"></div>
    <div class="box1"></div>
    <div class="box1"></div>
    <div class="box1"></div>
    <div class="box1"></div>
    <div class="box1"></div>
    <div class="box1"></div>
    <div class="box1"></div>
<script src="./jquery.js"></script>
<script>
// 点击按钮，更改元素位置
// $('.btn').click(function() {
//     // 直接书写动画，动画会立即执行
//     // $('.box1').animate({ left: 1200 }, 2000);
//     console.log('click btn')
//     // 1秒之后执行
//     $('.box1').delay(1000).animate({ left: 1200 }, 2000);
// })
// $('.btn').click(function() {
//     // 这些盒子每个1秒钟执行一次
//     $('.box1').each(function(index, item) {
//         // 获取元素: $(this), $(item)
//         $(item).delay(index * 1000).animate({ left: 1200 }, 2000)
//     })
// })

// 点击按钮执行动画
$('.btn').click(function() {
    // 动画1，向右移动1500
    $('.box2').animate({ left: 1500 }, 2000)
    // 动画2，向下移动500
    $('.box2').animate({ top: 500 }, 2000)
    // 动画3，向左移动1000
    $('.box2')
        // .stop()                  // 停止当前执行的动画（停止动画1），立即执行下一个（执行动画2）
        // .stop(false, true)       // 当前动画是动画1，立即停止，闭关执行完毕，执行下一个动画（动画2）
        // .stop(true, true)        // 清空动画队列（删除动画1和动画2），当前动画是动画1，被立即停止并执行完毕
        .stop(true)                 // 清空动画队列（删除动画1和动画2），当前动画是动画1，被立即停止
        .animate({ left: 500 }, 2000)
})
</script>
</body>
</html>
```



### 1.7 动画累积

一个元素身上可能存在多个动画，尤其在不经意间造成的动画积累，此时，就要进行防止（防流氓）

 比如: 

​		现在有一支队伍，接到命令去往广州，在中途又接到命了回北京

​		此时，该队伍有两个策略:

​				第一个策略: 放弃原有任务，立即执行新的任务

​						直接利用stop(true)来实现

​				第二个策略: 只有当元素不运动的时候，才接受新的任务

​						利用is(): 表示元素是否具备某种状态

​						如：is(‘:animated’) 表示正在执行动画

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        div {
            width: 100px;
            height: 100px;
            margin-top: 10px;
            position: relative;
            background-color: pink;
        }
        .box2 {
            background-color: green;
            margin-left: 120px;
        }
    </style>
</head>
<body>
    <button class="btn1">去广州</button>
    <button class="btn2">去北京</button>
    <div class="box1"></div>
<script src="./jquery.js"></script>
<script>
$('.btn1').click(function() {
    $('.box1').animate({ left: 1500 }, 4000)
});

$('.btn2').click(function() {
    // $('.box1').animate({ top: 500 }, 3000)
    // 接到命令就立即改变行程
    // $('.box1').stop(true).animate({ top: 500 }, 3000)
    
    // 判断正在执行动画
    // console.log($('.box1').is(':animated'));
    if ($('.box1').is(':animated')) {
        // 不接其它任务
        return;
    }
    $('.box1').stop(true).animate({ top: 500 }, 3000)
});
</script>
</body>
</html>
```

